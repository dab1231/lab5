# 🎓 ПРОСТОЕ ОБЪЯСНЕНИЕ ЗАДАНИЯ

## ❓ Что нужно сделать?

Создать программу, которая **не знает заранее**:
- С каким классом работать
- Какой метод вызывать
- Какие параметры использовать

Всё это программа узнаёт **во время запуска** из командной строки!

---

## 🔍 Пример простыми словами

### Ситуация:

У тебя есть класс `Auto` (Автомобиль) с методом `setModelPrice()` (установить цену модели).

### Обычная программа (СКУЧНО):

```java
// Мы жёстко прописываем что делать:
Auto bmw = new Auto("BMW", 3);
bmw.setModelPrice("BMW0", 5500000);
```

Здесь всё **фиксировано**: класс Auto, метод setModelPrice, параметры.

### С рефлексией (ИНТЕРЕСНО):

```java
// Программа сама не знает что делать!
// Она получает инструкции из командной строки:

java ReflectionTask Vehicle.Auto setModelPrice BMW0 5500000
```

И программа **сама**:
1. Загружает класс `Vehicle.Auto`
2. Создаёт объект этого класса
3. Находит метод `setModelPrice`
4. Вызывает его с параметрами `BMW0` и `5500000`

---

## 🎬 Как это работает (по шагам)

### ШАГ 1: Запуск программы

```bash
java ReflectionTask Vehicle.Auto setModelPrice BMW0 5500000
```

Программа получает **4 параметра**:
- `args[0]` = "Vehicle.Auto" (какой класс)
- `args[1]` = "setModelPrice" (какой метод)
- `args[2]` = "BMW0" (название модели)
- `args[3]` = "5500000" (новая цена)

### ШАГ 2: Загрузка класса

```java
String className = args[0]; // "Vehicle.Auto"
Class<?> clazz = Class.forName(className);
```

**Что происходит:**
- Java ищет файл `Auto.class` в пакете `Vehicle`
- Загружает его в память
- Создаёт объект `Class<Auto>` с информацией о классе

**Аналогия:** Открыли энциклопедию и нашли статью про автомобили BMW.

### ШАГ 3: Создание объекта

```java
Constructor<?> constructor = clazz.getConstructor(String.class, int.class);
Object obj = constructor.newInstance("BMW", 3);
```

**Что происходит:**
- Ищем конструктор `Auto(String, int)`
- Вызываем его: `new Auto("BMW", 3)`
- Получаем объект BMW с 3 моделями

**Аналогия:** По инструкции из энциклопедии собрали настоящий автомобиль.

### ШАГ 4: Поиск метода

```java
String methodName = args[1]; // "setModelPrice"
Method method = clazz.getMethod(methodName, String.class, double.class);
```

**Что происходит:**
- Ищем метод с именем "setModelPrice"
- Который принимает (String, double)
- Находим: `void setModelPrice(String name, double price)`

**Аналогия:** В инструкции нашли раздел "Как изменить цену модели".

### ШАГ 5: Вызов метода

```java
String modelName = args[2]; // "BMW0"
double price = Double.parseDouble(args[3]); // 5500000

method.invoke(obj, modelName, price);
```

**Что происходит:**
- Вызываем найденный метод на нашем объекте
- Передаём параметры: "BMW0" и 5500000
- Эквивалент: `obj.setModelPrice("BMW0", 5500000)`

**Аналогия:** Выполнили инструкцию и изменили цену.

### ШАГ 6: Результат

```java
System.out.println(obj);
```

Выводим информацию об автомобиле с изменённой ценой!

---

## 📊 Визуальная схема

```
КОМАНДНАЯ СТРОКА
┌────────────────────────────────────────────────────────┐
│ java ReflectionTask Vehicle.Auto setModelPrice BMW0... │
└────────────────────────────────────────────────────────┘
                        ↓
┌────────────────────────────────────────────────────────┐
│ ПРОГРАММА НЕ ЗНАЕТ что делать!                         │
│ Она читает параметры...                                │
└────────────────────────────────────────────────────────┘
                        ↓
            ┌───────────┴───────────┐
            ↓                       ↓
    [ШАГ 1: Загрузка]      [ШАГ 2: Создание]
    Class.forName()         newInstance()
            ↓                       ↓
            └───────────┬───────────┘
                        ↓
            ┌───────────┴───────────┐
            ↓                       ↓
    [ШАГ 3: Поиск]         [ШАГ 4: Вызов]
    getMethod()             invoke()
            ↓                       ↓
            └───────────┬───────────┘
                        ↓
┌────────────────────────────────────────────────────────┐
│ РЕЗУЛЬТАТ                                              │
│ Цена модели BMW0 изменена на 5,500,000!              │
└────────────────────────────────────────────────────────┘
```

---

## 🤔 Зачем это нужно?

### Пример 1: Фреймворк Spring

```java
// В конфигурации указываешь:
@Bean
public MyService myService() { ... }

// Spring сам:
// 1. Загружает класс MyService
// 2. Создаёт объект
// 3. Внедряет зависимости
// Всё через РЕФЛЕКСИЮ!
```

### Пример 2: Тесты JUnit

```java
@Test
public void testSomething() { ... }

// JUnit сам:
// 1. Находит все методы с @Test
// 2. Вызывает их
// Всё через РЕФЛЕКСИЮ!
```

### Пример 3: Сериализация

```java
// Gson конвертирует JSON в объект:
Person person = gson.fromJson(json, Person.class);

// Gson сам:
// 1. Анализирует класс Person
// 2. Находит поля
// 3. Заполняет их значениями
// Всё через РЕФЛЕКСИЮ!
```

---

## ✅ Что УЖЕ сделано для тебя

Я создал **ВСЁ**! Тебе нужно только:

### 1. Скомпилировать:

```bash
javac -d bin -encoding UTF-8 src\Vehicle\*.java src\Exceptions\*.java src\ReflectionTask.java
```

### 2. Запустить:

```bash
java -cp bin ReflectionTask Vehicle.Auto setModelPrice BMW0 5500000
```

### Или просто:

```bash
run.bat
```

---

## 📝 Что ты увидишь на экране

```
=== Загружен класс: Vehicle.Auto ===

=== Информация об автомобиле ДО изменения цены ===
Марка: TestMark
Модели:
Название: BMW0, Цена: 1234567.0    ← Старая цена
Название: BMW10, Цена: 2345678.0
Название: BMW20, Цена: 3456789.0
---------------------------------------------

Найден метод: setModelPrice
Параметры метода: [class java.lang.String, double]

Вызываем метод: setModelPrice("BMW0", 5500000.0)
Метод успешно выполнен!

=== Информация об автомобиле ПОСЛЕ изменения цены ===
Марка: TestMark
Модели:
Название: BMW0, Цена: 5500000.0    ← НОВАЯ ЦЕНА!
Название: BMW10, Цена: 2345678.0
Название: BMW20, Цена: 3456789.0
```

---

## 🎯 Главное что нужно понять

### Без рефлексии:
```java
Auto auto = new Auto("BMW", 3);        // Мы знаем класс Auto
auto.setModelPrice("BMW0", 5500000);   // Мы знаем метод setModelPrice
```
✅ Быстро, безопасно
❌ Не гибко

### С рефлексией:
```java
Class<?> clazz = Class.forName(args[0]);     // Класс из параметра!
Object obj = clazz.newInstance();            // Объект любого класса!
Method m = clazz.getMethod(args[1]);         // Метод из параметра!
m.invoke(obj, args[2], args[3]);             // Вызов с любыми параметрами!
```
✅ Очень гибко
❌ Медленнее, сложнее

---

## 🎓 Для защиты нужно знать

### 3 главных метода:

```java
// 1. Загрузка класса
Class<?> clazz = Class.forName("Vehicle.Auto");

// 2. Получение метода
Method method = clazz.getMethod("setModelPrice", String.class, double.class);

// 3. Вызов метода
method.invoke(object, "BMW0", 5500000.0);
```

### 3 главных вопроса:

**Q: Что такое рефлексия?**
A: Механизм для работы с классами во время выполнения программы.

**Q: Зачем нужна?**
A: Когда класс/метод неизвестны при компиляции (фреймворки, плагины).

**Q: Недостатки?**
A: Медленнее обычного вызова, ошибки только в runtime.

---

## 🚀 Попробуй сам

### Эксперимент 1: Измени класс
```bash
java -cp bin ReflectionTask Vehicle.Motorcycle setModelPrice BMW0 4500000
```

### Эксперимент 2: Измени модель
```bash
java -cp bin ReflectionTask Vehicle.Auto setModelPrice BMW10 6000000
```

### Эксперимент 3: Вызови ошибку
```bash
java -cp bin ReflectionTask Vehicle.Auto setModelPrice BMW999 5000000
```
Увидишь: "Ошибка: такой модели нет"

---

## 💡 Резюме

**ЗАДАНИЕ:** Написать программу, которая через рефлексию вызывает метод изменения цены.

**РЕШЕНИЕ:** Уже готово в файле `ReflectionTask.java`

**ЗАПУСК:**
```bash
run.bat
```
или
```bash
java -cp bin ReflectionTask Vehicle.Auto setModelPrice BMW0 5500000
```

**Вот и всё!** 🎉

---

## 📞 Если ещё непонятно

Открой файлы:
1. **`QUICK_START.md`** - как запустить (2 минуты)
2. **`CODE_EXPLANATION.md`** - как работает код (5 минут)
3. **`DEFENSE_CHEATSHEET.md`** - что говорить на защите (10 минут)

Или просто запусти **`run.bat`** и посмотри что произойдёт! 😊
